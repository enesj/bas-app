// Compiled by ClojureScript 1.10.339 {}
goog.provide('basapp.ui.empolyees');
goog.require('cljs.core');
goog.require('keechma.ui_component');
goog.require('keechma.toolbox.ui');
goog.require('basapp.datascript');
goog.require('basapp.domain.seed');
goog.require('basapp.util');
goog.require('basapp.ui.antd');
goog.require('reagent.core');
goog.require('clojure.string');
basapp.ui.empolyees.comparison = (function basapp$ui$empolyees$comparison(data1,data2,field){
return basapp.util.comparison.call(null,data1,data2,field);
});
basapp.ui.empolyees.columns = (function basapp$ui$empolyees$columns(ctx,data){
return new cljs.core.PersistentVector(null, 6, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"title","title",636505583),"Ime",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),"name",new cljs.core.Keyword(null,"sorter","sorter",-2066997708),(function (p1__64121_SHARP_,p2__64122_SHARP_){
return basapp.ui.empolyees.comparison.call(null,p1__64121_SHARP_,p2__64122_SHARP_,new cljs.core.Keyword(null,"name","name",1843675177));
}),new cljs.core.Keyword(null,"render","render",-1408033454),(function (p1__64124_SHARP_,p2__64123_SHARP_){
return reagent.core.as_element.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"a","a",-2123407586),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"href","href",-793805698),keechma.ui_component.url.call(null,ctx,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"page","page",849072397),"employee",new cljs.core.Keyword(null,"id","id",-1388402092),basapp.util.get_id.call(null,p2__64123_SHARP_)], null))], null),p1__64124_SHARP_], null));
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"Prezime",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),"last-name",new cljs.core.Keyword(null,"sorter","sorter",-2066997708),(function (p1__64125_SHARP_,p2__64126_SHARP_){
return basapp.ui.empolyees.comparison.call(null,p1__64125_SHARP_,p2__64126_SHARP_,new cljs.core.Keyword(null,"last-name","last-name",-1695738974));
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"Korisni\u010Dko ime",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),"uname",new cljs.core.Keyword(null,"sorter","sorter",-2066997708),(function (p1__64127_SHARP_,p2__64128_SHARP_){
return basapp.ui.empolyees.comparison.call(null,p1__64127_SHARP_,p2__64128_SHARP_,new cljs.core.Keyword(null,"uname","uname",1929669230));
})], null),new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),"E-mail",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),"email",new cljs.core.Keyword(null,"sorter","sorter",-2066997708),(function (p1__64129_SHARP_,p2__64130_SHARP_){
return basapp.ui.empolyees.comparison.call(null,p1__64129_SHARP_,p2__64130_SHARP_,new cljs.core.Keyword(null,"email","email",1415816706));
})], null),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"title","title",636505583),"Odjeljenje",new cljs.core.Keyword(null,"dataIndex","dataIndex",778447901),"department",new cljs.core.Keyword(null,"sorter","sorter",-2066997708),(function (p1__64131_SHARP_,p2__64132_SHARP_){
return basapp.ui.empolyees.comparison.call(null,p1__64131_SHARP_,p2__64132_SHARP_,new cljs.core.Keyword(null,"department","department",-359157087));
}),new cljs.core.Keyword(null,"render","render",-1408033454),basapp.util.render_ref.call(null,ctx,"department",new cljs.core.Keyword("department","short-name","department/short-name",1711124852),new cljs.core.Keyword(null,"departments","departments",799278298).cljs$core$IFn$_invoke$arity$1(data))], null),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"title","title",636505583),"",new cljs.core.Keyword(null,"render","render",-1408033454),(function (p1__64133_SHARP_){
return reagent.core.as_element.call(null,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [basapp.ui.antd.popconfirm,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"title","title",636505583),"Jeste li sigurni?",new cljs.core.Keyword(null,"on-confirm","on-confirm",1527003038),(function (){
var data__$1 = cljs.core.js__GT_clj.call(null,p1__64133_SHARP_,new cljs.core.Keyword(null,"keywordize-keys","keywordize-keys",1310784252),true);
return keechma.toolbox.ui._LT_cmd.call(null,ctx,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"user-actions","user-actions",1950728499),new cljs.core.Keyword(null,"transact","transact",-267998670)], null),cljs.core.partial.call(null,basapp.domain.seed.insert_employee,new cljs.core.Keyword(null,"name","name",1843675177).cljs$core$IFn$_invoke$arity$1(data__$1),new cljs.core.Keyword(null,"last-name","last-name",-1695738974).cljs$core$IFn$_invoke$arity$1(data__$1),new cljs.core.Keyword(null,"uname","uname",1929669230).cljs$core$IFn$_invoke$arity$1(data__$1),new cljs.core.Keyword(null,"email","email",1415816706).cljs$core$IFn$_invoke$arity$1(data__$1),new cljs.core.Keyword(null,"phone","phone",-763596057).cljs$core$IFn$_invoke$arity$1(data__$1),new cljs.core.Keyword(null,"type","type",1174270348).cljs$core$IFn$_invoke$arity$1(data__$1),new cljs.core.Keyword(null,"position","position",-2011731912).cljs$core$IFn$_invoke$arity$1(data__$1),new cljs.core.Keyword(null,"id","id",-1388402092).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"department","department",-359157087).cljs$core$IFn$_invoke$arity$1(data__$1)),new cljs.core.Keyword(null,"id","id",-1388402092).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,"office","office",-733494767).cljs$core$IFn$_invoke$arity$1(data__$1)),false));
})], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [basapp.ui.antd.button,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"icon","icon",1679606541),"delete",new cljs.core.Keyword(null,"type","type",1174270348),"danger"], null)], null)], null));
})], null)], null);
});
basapp.ui.empolyees.employees_table = (function basapp$ui$empolyees$employees_table(ctx,data,filter_criteria){
var employees = (cljs.core.truth_(filter_criteria)?basapp.datascript.q_GT_.call(null,ctx,new cljs.core.PersistentVector(null, 8, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"find","find",496279456),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(null,"pull","pull",779986722,null),new cljs.core.Symbol(null,"?e","?e",-1194391683,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"*","*",345799209,null),new cljs.core.Keyword("db","id","db/id",-1388397098)], null)),new cljs.core.Symbol(null,"...","...",-1926939749,null)], null),new cljs.core.Keyword(null,"in","in",-1531184865),new cljs.core.Symbol(null,"$","$",-1580747756,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"?a","?a",1314302913,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"?b","?b",1575118075,null),new cljs.core.Symbol(null,"...","...",-1926939749,null)], null)], null),new cljs.core.Keyword(null,"where","where",-2044795965),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"?e","?e",-1194391683,null),new cljs.core.Keyword("employee","uname","employee/uname",-1172221252)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"?e","?e",-1194391683,null),new cljs.core.Symbol(null,"?a","?a",1314302913,null),new cljs.core.Symbol(null,"?b","?b",1575118075,null)], null)], null),filter_criteria):basapp.datascript.q_GT_.call(null,ctx,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"find","find",496279456),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(null,"pull","pull",779986722,null),new cljs.core.Symbol(null,"?e","?e",-1194391683,null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"*","*",345799209,null),new cljs.core.Keyword("db","id","db/id",-1388397098)], null)),new cljs.core.Symbol(null,"...","...",-1926939749,null)], null),new cljs.core.Keyword(null,"where","where",-2044795965),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"?e","?e",-1194391683,null),new cljs.core.Keyword("employee","uname","employee/uname",-1172221252)], null)], null)));
var employees__$1 = cljs.core.filter.call(null,new cljs.core.Keyword("employee","active","employee/active",-1479606522),employees);
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),(cljs.core.truth_(filter_criteria)?null:new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h2","h2",-372662728),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"style","style",-496642736),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"margin-top","margin-top",392161226),"0.5em",new cljs.core.Keyword(null,"margin-bottom","margin-bottom",388334941),"1em"], null)], null),"Korisnici"], null)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [basapp.ui.antd.table,new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"columns","columns",1998437288),basapp.ui.empolyees.columns.call(null,ctx,data),new cljs.core.Keyword(null,"dataSource","dataSource",-178401132),employees__$1,new cljs.core.Keyword(null,"pagination","pagination",-1553654604),basapp.util.pagination.call(null," korisnika"),new cljs.core.Keyword(null,"row-key","row-key",-1189010712),"id",new cljs.core.Keyword(null,"row-selection","row-selection",1964656498),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"on-change","on-change",-732046149),((function (employees,employees__$1){
return (function (p1__64135_SHARP_,p2__64134_SHARP_){
var selected = cljs.core.js__GT_clj.call(null,p2__64134_SHARP_,new cljs.core.Keyword(null,"keywordize-keys","keywordize-keys",1310784252),true);
keechma.toolbox.ui._LT_cmd.call(null,ctx,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"user-actions","user-actions",1950728499),new cljs.core.Keyword(null,"filter","filter",-948537934)], null),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, ["employee",cljs.core.mapv.call(null,new cljs.core.Keyword(null,"id","id",-1388402092),selected)], null));

return basapp.ui.antd.message_info.call(null,["Izabrali ste: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(cljs.core.map.call(null,new cljs.core.Keyword(null,"name","name",1843675177),selected))].join(''));
});})(employees,employees__$1))
], null)], null)], null)], null);
});
basapp.ui.empolyees.render = (function basapp$ui$empolyees$render(ctx){
var vec__64136 = keechma.toolbox.ui.sub_GT_.call(null,ctx,new cljs.core.Keyword(null,"filter","filter",-948537934));
var field = cljs.core.nth.call(null,vec__64136,(0),null);
var choices = cljs.core.nth.call(null,vec__64136,(1),null);
var selections = cljs.core.nth.call(null,vec__64136,(2),null);
var route = keechma.toolbox.ui.route_GT_.call(null,ctx);
var page = new cljs.core.Keyword(null,"page","page",849072397).cljs$core$IFn$_invoke$arity$1(route);
var id = new cljs.core.Keyword(null,"id","id",-1388402092).cljs$core$IFn$_invoke$arity$1(route);
var filter = ((cljs.core.not_EQ_.call(null,field,"employee"))?(cljs.core.truth_(cljs.core.not_empty.call(null,choices))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.keyword.call(null,"employee",field),choices], null):(cljs.core.truth_(id)?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.keyword.call(null,"employee",page),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [id], null)], null):null
)):null);
var data = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"departments","departments",799278298),basapp.datascript.q_GT_.call(null,ctx,new cljs.core.PersistentVector(null, 7, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"find","find",496279456),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol(null,"pull","pull",779986722,null),new cljs.core.Symbol(null,"?e","?e",-1194391683,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"*","*",345799209,null)], null)),new cljs.core.Symbol(null,"...","...",-1926939749,null)], null),new cljs.core.Keyword(null,"in","in",-1531184865),new cljs.core.Symbol(null,"$","$",-1580747756,null),new cljs.core.Keyword(null,"where","where",-2044795965),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"?e","?e",-1194391683,null),new cljs.core.Keyword("department","short-name","department/short-name",1711124852)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"?e","?e",-1194391683,null),new cljs.core.Keyword("department","active","department/active",-1032676766),true], null)], null))], null);
return new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"div","div",1057191632),((cljs.core._EQ_.call(null,"employees",page))?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [basapp.ui.antd.row,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [basapp.ui.antd.col,basapp.util.row_style_8,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"a","a",-2123407586),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"href","href",-793805698),keechma.ui_component.url.call(null,ctx,new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"page","page",849072397),"dashboard"], null))], null),"\u2190 Povratak na naslovnicu"], null)], null)], null):new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [basapp.ui.antd.row,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [basapp.ui.antd.col,basapp.util.row_style_12,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"h3","h3",2067611163),["Korisnici: ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(clojure.string.join.call(null,", ",selections))].join('')], null)], null)], null)),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [basapp.ui.antd.row,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [basapp.ui.antd.col,basapp.util.row_style_12,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [basapp.ui.empolyees.employees_table,ctx,data,filter], null)], null)], null)], null);
});
basapp.ui.empolyees.component = keechma.ui_component.constructor$.call(null,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"renderer","renderer",336841071),basapp.ui.empolyees.render,new cljs.core.Keyword(null,"subscription-deps","subscription-deps",1798032321),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"datascript","datascript",-2114593819),new cljs.core.Keyword(null,"filter","filter",-948537934)], null)], null));

//# sourceMappingURL=empolyees.js.map?rel=1568199282930
